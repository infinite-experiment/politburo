{{define "content"}}
{{if .Flights}}
<!-- Header with column labels -->
<div class="px-4 py-3 border-b font-semibold text-xs sticky top-0" style="background: var(--nord2); border-color: var(--nord3); color: var(--nord5);">
  <div class="flex justify-between items-center">
    <div>Date</div>
    <div>Aircraft / Duration</div>
  </div>
</div>

<!-- Flight List -->
<ul class="divide-y list-none" id="flight-items" style="divide-color: var(--nord3);">
  {{range $index, $flight := .Flights}}
  <li style="background-color: {{if mod $index 2}}var(--nord1){{else}}transparent{{end}};">
    <button class="flight-item w-full px-4 py-3 text-left transition-colors duration-150"
            style="color: var(--nord4); display: block;"
            hx-get="/dashboard/logbook/flight/{{.SessionID}}/{{.FlightID}}/map?user_id={{.Username}}&page={{$.PageNo}}"
            hx-target="#map-container"
            hx-swap="innerHTML"
            hx-indicator="#global-spinner"
            data-flight-id="{{.FlightID}}"
            onmouseover="this.parentElement.style.backgroundColor = 'var(--nord2)'; this.style.color = 'var(--nord6)';"
            onmouseout="this.parentElement.style.backgroundColor = '{{if mod $index 2}}var(--nord1){{else}}transparent{{end}}'; this.style.color = 'var(--nord4)';"
            title="{{.Equipment}} | {{.Server}} | {{.Callsign}}">

      <div class="flex justify-between items-start gap-4">
        <!-- Left: Route and Timestamp -->
        <div class="flex-1">
          <div class="font-medium text-sm" style="color: inherit;">
            {{.Origin}} → {{.Dest}}
          </div>
          <div class="text-xs mt-1" style="color: var(--nord5);">
            {{.TimeStamp.Format "Jan 02, 2006 15:04"}}
          </div>
        </div>
        <!-- Right: Aircraft and Duration -->
        <div class="text-right">
          <div class="text-xs truncate" style="color: var(--nord4);">
            {{.Aircraft}}
          </div>
          <div class="text-xs mt-1" style="color: var(--nord5);">
            {{.Duration}}
          </div>
        </div>
      </div>
    </button>
  </li>
  {{end}}
</ul>
{{else}}
<div class="flex items-center justify-center h-32" style="color: var(--nord4);">
  <p class="text-sm">No flights found</p>
</div>
{{end}}

<!-- Out-of-band pagination update -->
<div id="pagination" hx-swap-oob="true" class="flex justify-between items-center px-4 py-3 border-t"
     style="border-color: var(--nord3);">
  {{if .HasPrevious}}
  <button hx-get="/dashboard/logbook/flights?user_id={{.UserID}}&page={{.PrevPage}}"
          hx-target="#flight-list"
          hx-swap="innerHTML"
          hx-indicator="#global-spinner"
          class="text-sm px-3 py-1 rounded transition-colors"
          style="color: var(--nord8); background: var(--nord3); border: none; cursor: pointer;"
          onmouseover="this.style.backgroundColor = 'var(--nord8)'; this.style.color = 'var(--nord0)';"
          onmouseout="this.style.backgroundColor = 'var(--nord3)'; this.style.color = 'var(--nord8)';">
    ← Previous
  </button>
  {{else}}
  <button disabled
          class="text-sm px-3 py-1 rounded transition-colors"
          style="color: var(--nord3); background: var(--nord2); border: none; cursor: not-allowed; opacity: 0.5;">
    ← Previous
  </button>
  {{end}}

  <span class="text-xs" style="color: var(--nord4);">
    {{if .TotalPages}}
      Page {{.PageNo}} of {{.TotalPages}} ({{.TotalCount}} flights)
    {{else}}
      Page {{.PageNo}}
    {{end}}
  </span>

  {{if .HasNext}}
  <button hx-get="/dashboard/logbook/flights?user_id={{.UserID}}&page={{.NextPage}}"
          hx-target="#flight-list"
          hx-swap="innerHTML"
          hx-indicator="#global-spinner"
          class="text-sm px-3 py-1 rounded transition-colors"
          style="color: var(--nord8); background: var(--nord3); border: none; cursor: pointer;"
          onmouseover="this.style.backgroundColor = 'var(--nord8)'; this.style.color = 'var(--nord0)';"
          onmouseout="this.style.backgroundColor = 'var(--nord3)'; this.style.color = 'var(--nord8)';">
    Next →
  </button>
  {{else}}
  <button disabled
          class="text-sm px-3 py-1 rounded transition-colors"
          style="color: var(--nord3); background: var(--nord2); border: none; cursor: not-allowed; opacity: 0.5;">
    Next →
  </button>
  {{end}}
</div>
{{end}}
