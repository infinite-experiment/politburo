{{define "content"}}
{{if .Flights}}
<!-- Header with column labels -->
<div class="px-4 py-3 border-b font-semibold text-xs sticky top-0" style="background: var(--nord2); border-color: var(--nord3); color: var(--nord5);">
  <div class="grid grid-cols-12 gap-2 items-center">
    <div class="col-span-6">Route</div>
    <div class="col-span-3">Aircraft</div>
    <div class="col-span-2 text-center">Duration</div>
    <div class="col-span-1 text-center">Landings</div>
  </div>
</div>

<!-- Flight List -->
<ul class="divide-y list-none" id="flight-items" style="divide-color: var(--nord3);">
  {{range $index, $flight := .Flights}}
  <li style="background-color: {{if mod $index 2}}var(--nord1){{else}}transparent{{end}};">
    <button class="flight-item w-full px-4 py-3 text-left transition-colors duration-150"
            style="color: var(--nord4); display: block;"
            hx-get="/dashboard/logbook/flight/{{.SessionID}}/{{.FlightID}}/map"
            hx-target="#map-container"
            hx-swap="innerHTML"
            data-flight-id="{{.FlightID}}"
            onmouseover="this.parentElement.style.backgroundColor = 'var(--nord2)'; this.style.color = 'var(--nord6)';"
            onmouseout="this.parentElement.style.backgroundColor = '{{if mod $index 2}}var(--nord1){{else}}transparent{{end}}'; this.style.color = 'var(--nord4)';"
            title="{{.Equipment}} | {{.Server}} | {{.Callsign}}">

      <div class="grid grid-cols-12 gap-2 items-center">
        <div class="col-span-6">
          <div class="font-medium text-sm" style="color: inherit;">
            {{.Origin}} → {{.Dest}}
          </div>
        </div>
        <div class="col-span-3">
          <div class="text-xs truncate" style="color: var(--nord4);">
            {{.Aircraft}}
          </div>
        </div>
        <div class="col-span-2 text-center">
          <div class="text-xs" style="color: var(--nord4);">
            {{.Duration}}
          </div>
        </div>
        <div class="col-span-1 text-center">
          <span class="text-xs px-2 py-0.5 rounded" style="background: var(--nord3); color: var(--nord4); display: inline-block;">
            {{.Landings}}
          </span>
        </div>
      </div>
    </button>
  </li>
  {{end}}
</ul>
{{else}}
<div class="flex items-center justify-center h-32" style="color: var(--nord4);">
  <p class="text-sm">No flights found</p>
</div>
{{end}}

<!-- Out-of-band pagination update -->
<div id="pagination" hx-swap-oob="true" class="flex justify-between items-center px-4 py-3 border-t"
     style="border-color: var(--nord3);">
  {{if .HasPrevious}}
  <button hx-get="/dashboard/logbook/flights?user_id={{.UserID}}&page={{.PrevPage}}"
          hx-target="#flight-list"
          hx-swap="innerHTML"
          class="text-sm px-3 py-1 rounded transition-colors"
          style="color: var(--nord8); background: var(--nord3); border: none; cursor: pointer;"
          onmouseover="this.style.backgroundColor = 'var(--nord8)'; this.style.color = 'var(--nord0)';"
          onmouseout="this.style.backgroundColor = 'var(--nord3)'; this.style.color = 'var(--nord8)';">
    ← Previous
  </button>
  {{else}}
  <div></div>
  {{end}}

  <span class="text-xs" style="color: var(--nord4);">
    Page {{.PageNo}}
  </span>

  {{if .HasNext}}
  <button hx-get="/dashboard/logbook/flights?user_id={{.UserID}}&page={{.NextPage}}"
          hx-target="#flight-list"
          hx-swap="innerHTML"
          class="text-sm px-3 py-1 rounded transition-colors"
          style="color: var(--nord8); background: var(--nord3); border: none; cursor: pointer;"
          onmouseover="this.style.backgroundColor = 'var(--nord8)'; this.style.color = 'var(--nord0)';"
          onmouseout="this.style.backgroundColor = 'var(--nord3)'; this.style.color = 'var(--nord8)';">
    Next →
  </button>
  {{else}}
  <div></div>
  {{end}}
</div>
{{end}}
