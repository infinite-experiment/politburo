{{define "content"}}
<div class="flex items-center justify-center h-full overflow-auto" style="background-color: var(--nord0);">
  {{if .FlightID}}
  <!-- Flight selected: show metadata (always available from flight history API) -->
  <div class="w-full h-full flex items-center justify-center p-4">
    <div class="px-6 py-4 rounded-lg text-sm backdrop-blur-sm" style="background: rgba(59, 66, 82, 0.95); border: 1px solid var(--nord3); max-width: 500px;">
      <!-- Route Header -->
      <h3 class="font-semibold mb-4" style="color: var(--nord8); font-size: 1.1rem;">
        {{.Meta.Origin}} â†’ {{.Meta.Dest}}
      </h3>

      <!-- Flight Metadata Section -->
      <div class="mb-4 pb-4" style="border-bottom: 1px solid var(--nord3);">
        <div class="text-xs font-semibold mb-2" style="color: var(--nord5);">FLIGHT</div>
        <div class="space-y-1" style="color: var(--nord4);">
          <div>Aircraft: <span style="color: var(--nord6);">{{.Meta.Aircraft}}</span></div>
          <div>Livery: <span style="color: var(--nord6);">{{.Meta.Livery}}</span></div>
          <div>Callsign: <span style="color: var(--nord6);">{{.Meta.Callsign}}</span></div>
          <div>Date: <span style="color: var(--nord6);">{{.Meta.TimeStamp.Format "Jan 02, 2006 15:04"}}</span></div>
        </div>
      </div>

      <!-- Performance Section -->
      <div class="mb-4 pb-4" style="border-bottom: 1px solid var(--nord3);">
        <div class="text-xs font-semibold mb-2" style="color: var(--nord5);">PERFORMANCE</div>
        <div class="space-y-1" style="color: var(--nord4);">
          <div>Duration: <span style="color: var(--nord6);">{{.Meta.Duration}}</span></div>
          <div>Landings: <span style="color: var(--nord6);">{{.Meta.Landings}}</span></div>
          <div>Violations: <span style="color: var(--nord6);">{{.Meta.Violations}}</span></div>
        </div>
      </div>

      <!-- Flight Time Breakdown -->
      {{if or (gt .Meta.DayTime 0) (gt .Meta.NightTime 0)}}
      <div class="mb-4 pb-4" style="border-bottom: 1px solid var(--nord3);">
        <div class="text-xs font-semibold mb-2" style="color: var(--nord5);">FLIGHT TIME</div>
        <div class="space-y-1" style="color: var(--nord4);">
          {{if gt .Meta.DayTime 0}}<div>Day: <span style="color: #A3BE8C;">{{printf "%.1f" .Meta.DayTime}} mins</span></div>{{end}}
          {{if gt .Meta.NightTime 0}}<div>Night: <span style="color: #BF616A;">{{printf "%.1f" .Meta.NightTime}} mins</span></div>{{end}}
        </div>
      </div>
      {{end}}

      <!-- Stats Section -->
      {{if gt .Meta.XP 0}}
      <div class="mb-4 pb-4" style="border-bottom: 1px solid var(--nord3);">
        <div class="text-xs font-semibold mb-2" style="color: var(--nord5);">STATS</div>
        <div style="color: var(--nord4);">
          XP Earned: <span style="color: #EBCB8B;">+{{.Meta.XP}}</span>
        </div>
      </div>
      {{end}}

      <!-- Server Info -->
      <div>
        <div class="text-xs font-semibold mb-2" style="color: var(--nord5);">SERVER</div>
        <div class="flex items-center gap-2">
          <span class="text-xs" style="color: var(--nord4);">{{.Meta.Server}}</span>
          <span class="inline-block px-2 py-1 rounded text-xs" style="background: var(--nord3); color: var(--nord6);">
            {{if eq .Meta.WorldType 1}}Casual{{else if eq .Meta.WorldType 2}}Training{{else if eq .Meta.WorldType 3}}Expert{{else}}Unknown{{end}}
          </span>
        </div>
      </div>

      <!-- Message about route data -->
      <div class="mt-6 pt-4" style="border-top: 1px solid var(--nord3);">
        <p class="text-xs" style="color: var(--nord5);">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 1rem; height: 1rem; display: inline; margin-right: 0.25rem;">
            <path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853.75.75 0 0 1 .041 1.33l-.708 2.836a.75.75 0 0 0 1.063.853.75.75 0 0 1 1.33.041l2.836-.708a.75.75 0 0 0 .852 1.063.75.75 0 0 1 1.33.041l2.836-.708a.75.75 0 0 0 .853-1.063.75.75 0 0 1 .041-1.33l-2.836-.708a.75.75 0 0 0-.853-1.063.75.75 0 0 1-1.33-.041l-2.836.708a.75.75 0 0 0-.852-1.063.75.75 0 0 1-1.33-.041l-2.836.708a.75.75 0 0 0-.852-1.063z" />
          </svg>
          Route data not cached (too old or not yet processed)
        </p>
      </div>
    </div>
  </div>
  {{else}}
  <!-- No flight selected: show initial prompt -->
  <div class="text-center" style="color: var(--nord4); padding: 2rem; max-width: 600px;">
    <svg class="w-16 h-16 mx-auto mb-4" style="color: var(--nord8);" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
      <path stroke-linecap="round" stroke-linejoin="round" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7" />
    </svg>
    <p class="text-lg font-medium" style="color: var(--nord6); margin-bottom: 0.5rem;">Select a flight to view route</p>
    <p class="text-sm" style="color: var(--nord4); margin-bottom: 1.5rem;">Search for a pilot or browse recent flights to see the map</p>
  </div>
  {{end}}
</div>
{{end}}
